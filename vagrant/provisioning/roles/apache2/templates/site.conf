<VirtualHost *:80>
        ServerName {{ item.name }}
        ServerAdmin webmaster@localhost
        DocumentRoot {{ item.rootFolder }}

        LogLevel info

        ErrorLog ${APACHE_LOG_DIR}/error_prod.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined

        <Directory {{ item.rootFolder }}>
            LimitRequestBody 52428800
            AllowOverride All
            Order Allow,Deny
            Allow from All
			DirectoryIndex index.php
			<IfModule mod_fastcgi.c>
                AddHandler php7-fcgi .php
                Action php7-fcgi /php7-fcgi
                Alias /php7-fcgi /usr/lib/cgi-bin/php7-fcgi
                FastCgiExternalServer /usr/lib/cgi-bin/php7-fcgi -socket /var/run/php/php7.0-fpm.sock -pass-header Authorization
			</IfModule>
			<IfModule mod_rewrite.c>
				Options -MultiViews
				RewriteEngine On
				RewriteCond %{HTTP:Authorization} ^(.*)
				RewriteRule .* - [e=HTTP_AUTHORIZATION:%1]
				RewriteCond %{REQUEST_FILENAME} !-f
				RewriteRule ^(.*)$ index.php [QSA,L]
			</IfModule>
    </Directory>
	 <Directory /usr/lib/cgi-bin>
                Require all granted
        </Directory>

	
        # For most configuration files from conf-available/, which are
        # enabled or disabled at a global level, it is possible to
        # include a line for only one particular virtual host. For example the
        # following line enables the CGI configuration for this host only
        # after it has been globally disabled with "a2disconf".
        #Include conf-available/serve-cgi-bin.conf
</VirtualHost>
